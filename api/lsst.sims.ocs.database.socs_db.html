

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>lsst.sims.ocs.database.socs_db module &mdash; Simulated OCS 1.0.11 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Simulated OCS 1.0.11 documentation" href="../index.html"/>
        <link rel="up" title="lsst.sims.ocs.database package" href="lsst.sims.ocs.database.html"/>
        <link rel="next" title="lsst.sims.ocs.downtime package" href="lsst.sims.ocs.downtime.html"/>
        <link rel="prev" title="lsst.sims.ocs.database.tables.write_tbls module" href="lsst.sims.ocs.database.tables.write_tbls.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Simulated OCS
          

          
            
            <img src="../_static/socs_logo.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.0.11
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../database.html">Survey Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="../history.html">History</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="lsst.sims.ocs.html">lsst.sims.ocs package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="lsst.sims.ocs.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="lsst.sims.ocs.configuration.html">lsst.sims.ocs.configuration package</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="lsst.sims.ocs.database.html">lsst.sims.ocs.database package</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="lsst.sims.ocs.database.html#subpackages">Subpackages</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="lsst.sims.ocs.database.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="lsst.sims.ocs.database.html#module-lsst.sims.ocs.database">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="lsst.sims.ocs.downtime.html">lsst.sims.ocs.downtime package</a></li>
<li class="toctree-l3"><a class="reference internal" href="lsst.sims.ocs.environment.html">lsst.sims.ocs.environment package</a></li>
<li class="toctree-l3"><a class="reference internal" href="lsst.sims.ocs.kernel.html">lsst.sims.ocs.kernel package</a></li>
<li class="toctree-l3"><a class="reference internal" href="lsst.sims.ocs.observatory.html">lsst.sims.ocs.observatory package</a></li>
<li class="toctree-l3"><a class="reference internal" href="lsst.sims.ocs.sal.html">lsst.sims.ocs.sal package</a></li>
<li class="toctree-l3"><a class="reference internal" href="lsst.sims.ocs.setup.html">lsst.sims.ocs.setup package</a></li>
<li class="toctree-l3"><a class="reference internal" href="lsst.sims.ocs.utilities.html">lsst.sims.ocs.utilities package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="lsst.sims.ocs.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="lsst.sims.ocs.html#module-lsst.sims.ocs">Module contents</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Simulated OCS</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="lsst.sims.ocs.html">lsst.sims.ocs package</a> &raquo;</li>
        
          <li><a href="lsst.sims.ocs.database.html">lsst.sims.ocs.database package</a> &raquo;</li>
        
      <li>lsst.sims.ocs.database.socs_db module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/lsst.sims.ocs.database.socs_db.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-lsst.sims.ocs.database.socs_db">
<span id="lsst-sims-ocs-database-socs-db-module"></span><h1>lsst.sims.ocs.database.socs_db module<a class="headerlink" href="#module-lsst.sims.ocs.database.socs_db" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="lsst.sims.ocs.database.socs_db.SocsDatabase">
<em class="property">class </em><code class="descclassname">lsst.sims.ocs.database.socs_db.</code><code class="descname">SocsDatabase</code><span class="sig-paren">(</span><em>sqlite_save_path=None</em>, <em>session_id_start=None</em>, <em>sqlite_session_save_path=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lsst/sims/ocs/database/socs_db.html#SocsDatabase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lsst.sims.ocs.database.socs_db.SocsDatabase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">future.types.newobject.newobject</span></code></p>
<p>Main class for simulation database interaction.</p>
<p>This class is responsible for interacting with the main SQLite simulation database.
This consists of a machine session tracking database and individual database files
for each run session of the simulation.</p>
<dl class="attribute">
<dt id="lsst.sims.ocs.database.socs_db.SocsDatabase.db_dialect">
<code class="descname">db_dialect</code><a class="headerlink" href="#lsst.sims.ocs.database.socs_db.SocsDatabase.db_dialect" title="Permalink to this definition">¶</a></dt>
<dd><p><em>str</em> – The flavor of the database to use. Options: sqlite.</p>
</dd></dl>

<dl class="attribute">
<dt id="lsst.sims.ocs.database.socs_db.SocsDatabase.metadata">
<code class="descname">metadata</code><a class="headerlink" href="#lsst.sims.ocs.database.socs_db.SocsDatabase.metadata" title="Permalink to this definition">¶</a></dt>
<dd><p><em>sqlalchemy.MetaData</em> – The instance for holding the relevant tables.</p>
</dd></dl>

<dl class="attribute">
<dt id="lsst.sims.ocs.database.socs_db.SocsDatabase.engine">
<code class="descname">engine</code><a class="headerlink" href="#lsst.sims.ocs.database.socs_db.SocsDatabase.engine" title="Permalink to this definition">¶</a></dt>
<dd><p><em>sqlalchemy.engine.Engine</em> – The instance of the database engine.</p>
</dd></dl>

<dl class="attribute">
<dt id="lsst.sims.ocs.database.socs_db.SocsDatabase.sqlite_save_path">
<code class="descname">sqlite_save_path</code><a class="headerlink" href="#lsst.sims.ocs.database.socs_db.SocsDatabase.sqlite_save_path" title="Permalink to this definition">¶</a></dt>
<dd><p><em>str</em> – A path to save all resulting database files for SQLite.</p>
</dd></dl>

<dl class="attribute">
<dt id="lsst.sims.ocs.database.socs_db.SocsDatabase.sqlite_session_save_path">
<code class="descname">sqlite_session_save_path</code><a class="headerlink" href="#lsst.sims.ocs.database.socs_db.SocsDatabase.sqlite_session_save_path" title="Permalink to this definition">¶</a></dt>
<dd><p><em>str</em> – A path to save the SQLite session tracking database.</p>
</dd></dl>

<dl class="attribute">
<dt id="lsst.sims.ocs.database.socs_db.SocsDatabase.session_engine">
<code class="descname">session_engine</code><a class="headerlink" href="#lsst.sims.ocs.database.socs_db.SocsDatabase.session_engine" title="Permalink to this definition">¶</a></dt>
<dd><p><em>sqlalchemy.engine.Engine</em> – The session specific instance of the database engine. SQLite only.</p>
</dd></dl>

<dl class="attribute">
<dt id="lsst.sims.ocs.database.socs_db.SocsDatabase.session_metadata">
<code class="descname">session_metadata</code><a class="headerlink" href="#lsst.sims.ocs.database.socs_db.SocsDatabase.session_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p><em>sqlalchemy.MetaData</em> – The instance for holding the session specific tables. SQLite only.</p>
</dd></dl>

<dl class="attribute">
<dt id="lsst.sims.ocs.database.socs_db.SocsDatabase.session_start">
<code class="descname">session_start</code><a class="headerlink" href="#lsst.sims.ocs.database.socs_db.SocsDatabase.session_start" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – A new starting session Id for counting new simulations.</p>
</dd></dl>

<p>Initialize the class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sqlite_save_path</strong> (<em>str</em>) – A path to save all resulting database files for SQLite.</li>
<li><strong>session_id_start</strong> (<em>int</em>) – A new starting session Id for counting new simulations.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="lsst.sims.ocs.database.socs_db.SocsDatabase.append_data">
<code class="descname">append_data</code><span class="sig-paren">(</span><em>table_name</em>, <em>table_data</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lsst/sims/ocs/database/socs_db.html#SocsDatabase.append_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lsst.sims.ocs.database.socs_db.SocsDatabase.append_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Collect information for the provided table.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>table_name</strong> (<em>str</em>) – The attribute name holding the sqlalchemy.Table instance.</li>
<li><strong>table_data</strong> (<em>topic</em>) – The Scheduler topic data instance.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="lsst.sims.ocs.database.socs_db.SocsDatabase.clear_data">
<code class="descname">clear_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lsst/sims/ocs/database/socs_db.html#SocsDatabase.clear_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lsst.sims.ocs.database.socs_db.SocsDatabase.clear_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear all stored data lists.</p>
</dd></dl>

<dl class="method">
<dt id="lsst.sims.ocs.database.socs_db.SocsDatabase.create_db">
<code class="descname">create_db</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lsst/sims/ocs/database/socs_db.html#SocsDatabase.create_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lsst.sims.ocs.database.socs_db.SocsDatabase.create_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the database tables.</p>
<p>This function does the actual work of creating all the relevant database tables.
This creates the session tracking database with the Session table.</p>
</dd></dl>

<dl class="method">
<dt id="lsst.sims.ocs.database.socs_db.SocsDatabase.new_session">
<code class="descname">new_session</code><span class="sig-paren">(</span><em>run_comment</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lsst/sims/ocs/database/socs_db.html#SocsDatabase.new_session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lsst.sims.ocs.database.socs_db.SocsDatabase.new_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Log a new session to the database and return the ID.</p>
<p>This function logs a new session to the database and returns the session ID.
This writes an entry to the session tracking database. Then a session ID
specific database is created and the information is replicated in that
Session table. Since SQLite auto increment values always start at one, an
offset is applied to make the session IDs commensurate with OpSim3 style ones.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>run_comment</strong> (<em>str</em>) – The startup comment for the simulation run.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><em>int</em> – The session ID for this simulation run.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="lsst.sims.ocs.database.socs_db.SocsDatabase.write">
<code class="descname">write</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lsst/sims/ocs/database/socs_db.html#SocsDatabase.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lsst.sims.ocs.database.socs_db.SocsDatabase.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write collected information into the database.</p>
</dd></dl>

<dl class="method">
<dt id="lsst.sims.ocs.database.socs_db.SocsDatabase.write_table">
<code class="descname">write_table</code><span class="sig-paren">(</span><em>table_name</em>, <em>table_data</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lsst/sims/ocs/database/socs_db.html#SocsDatabase.write_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lsst.sims.ocs.database.socs_db.SocsDatabase.write_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Collect information for the provided table.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>table_name</strong> (<em>str</em>) – The attribute name holding the sqlalchemy.Table instance.</li>
<li><strong>table_data</strong> (<em>list</em><em>[</em><em>topic</em><em>]</em>) – A set of Scheduler topic data instances.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="lsst.sims.ocs.database.socs_db.SocsDatabase.data_empty">
<code class="descname">data_empty</code><a class="headerlink" href="#lsst.sims.ocs.database.socs_db.SocsDatabase.data_empty" title="Permalink to this definition">¶</a></dt>
<dd><p><em>bool</em> – Is internal data list empty</p>
</dd></dl>

</dd></dl>

</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="lsst.sims.ocs.downtime.html" class="btn btn-neutral float-right" title="lsst.sims.ocs.downtime package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="lsst.sims.ocs.database.tables.write_tbls.html" class="btn btn-neutral" title="lsst.sims.ocs.database.tables.write_tbls module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015-2017, LSST Systems Engineering.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.11',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>